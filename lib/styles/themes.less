@prefix: graphjs;

.colorStructure(@theme-default-color, @theme-shade-color, @theme-contrast-color, @theme-text-color-strong) {
    @default-color:     @theme-default-color;
    @theme-color:       tint(@default-color, 25%);
    @danger-color:      rgb(255, 79, 79);
    @shade-color:       @theme-shade-color;
    @contrast-color:    @theme-contrast-color;
    @text-color-strong: @theme-text-color-strong;
    @text-color-normal: fade(@theme-text-color-strong, 75%);
    @text-color-weak:   fade(@theme-text-color-strong, 50%);

    .@{prefix}-root {
        *, *[type] {
            &::selection {
                background-color: fade(@text-color-strong, 15%);
            }
        }
        color: @text-color-normal;
        &::selection {
            background-color: fade(@text-color-strong, 15%);
        }
        input, input[type], textarea {
            color: @text-color-normal;
            background-color: @contrast-color;
            .placeholder-color(@text-color-weak);
        }
        form {
            .@{prefix}-option {
                a {
                    color: @text-color-normal;
                }
            }
        }
    }
    .@{prefix}-article {
        * {
            color: @text-color-normal;
        }
        h2 {
            color: @text-color-strong;
        }
        h3 {
            color: @text-color-strong;
        }
        a {
            color: @theme-color;
            border-bottom-color: @text-color-weak;
        }
        b, strong {
            color: @text-color-strong;
        }
        s, strike, del {
            color: @text-color-weak;
        }
        pre {
            border-color: fade(@default-color, 25%);
            background-color: fade(@default-color, 10%);
        }
        blockquote {
            border-left-color: @theme-color;
            background-color: fade(@default-color, 10%);
            &::before{
                color: @theme-color;
            }
            span {
                color: @text-color-normal;
            }
        }
    }
    .@{prefix}-box.@{prefix}-root {
        border: 1px solid fade(@default-color, 3%);
        background-color: @shade-color;
        .@{prefix}-header {
            border-bottom: 2px solid fade(@default-color, 10%);
            background-color: @contrast-color;
        }
        .@{prefix}-warning {
            border-bottom: 1px solid fade(@default-color, 15%);
        }
    }
    .@{prefix}-checked {
        .@{prefix}-check {
            background-color: @shade-color;
        }
    }
    .@{prefix}-card.@{prefix}-root {
        background-color: @contrast-color;
        b {
            .text-color-states(@default-color);
        }
    }
    .@{prefix}-credit {
        span {
            small, time {
                color: @text-color-weak;
            }
            a {
                color: @text-color-weak;
                &::before {
                    color: @text-color-weak;
                }
            }
        }
    }
    .@{prefix}-loading {
        &:hover {
            .@{prefix}-loader {
                background-color: fade(@shade-color, 85%);
                &.@{prefix}-placeholder {
                    background-color: @shade-color;
                }
            }
        }
        .@{prefix}-loader {
            &.@{prefix}-placeholder {
                background-color: @shade-color;
            }
        }
        .@{prefix}-blockage {
            color: @text-color-weak;
            border-color: @text-color-weak;
            &:hover {
                color: @text-color-normal;
                border-color: @text-color-normal;
                background-color: @contrast-color !important;
            }
        }
    }
    .@{prefix}-pagination {
        .@{prefix}-controls {
            color: @text-color-strong;
            a {
                svg {
                    path {
                        fill: @text-color-strong;
                    }
                }
            }
            p {
                color: @text-color-normal;
            }
        }
    }
    .@{prefix}-promo {
        background-color: fade(@default-color, 85%);
    }
    .@{prefix}-wallet.@{prefix}-root {
        .@{prefix}-content {
            & > p {
                color: @text-color-strong;
            }
        }
    }
    @{prefix}-alert.@{prefix}-root {
        color: @text-color-normal;
        background-color: @contrast-color !important;
        .@{prefix}-content {
            background-color: @contrast-color !important;
        }
        & > button {
            border-top: 2px solid fade(@default-color, 10%);
            background-color: @contrast-color !important;
            &:hover {
                background-color: @contrast-color !important;
            }
            &.@{prefix}-danger {
                background-color: @contrast-color;
            }
            &.@{prefix}-half {
                &:first-of-type {
                    border-right: 1px solid fade(@default-color, 10%);
                }
                &:last-of-type {
                    border-left: 1px solid fade(@default-color, 10%);
                }
            }
        }
    }
    @{prefix}-auth-login.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-auth-register.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-auth-reset.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            form {
                b {
                    color: @text-color-strong;
                }
                p {
                    color: @text-color-normal;
                }
            }
        }
    }
    @{prefix}-auth-state.@{prefix}-root {
        background-color: @shade-color;
        .@{prefix}-content {
            a {
                &:hover {
                    background-color: fade(@contrast-color, 50%);
                }
                &.@{prefix}-active {
                    background-color: @contrast-color;
                }
            }
            .@{prefix}-logged {
                .@{prefix}-details {
                    span {
                        color: @theme-color;
                    }
                }
            }
        }
    }
    @{prefix}-auth.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-blog-composer.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            & > p {
                color: @text-color-normal;
            }
            form {
                input, input[type] {
                    color: @theme-color;
                    border-bottom: 1px dotted @text-color-weak;
                    &::placeholder {
                        opacity: .5;
                        color: @theme-color;
                    }
                }
                .@{prefix}-information {
                    color: @text-color-weak;
                    & > * {
                        &::before {
                            color: @text-color-weak;
                        }
                        & > a {
                            color: @text-color-normal;
                            &::before {
                                color: @text-color-weak;
                            }
                        }
                    }
                    .@{prefix}-action {
                        & > * {
                            .text-color-states(@text-color-strong);
                            &::before {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
                .@{prefix}-toolbar {
                    &:hover {
                        .@{prefix}-tool {
                            border-color: fade(@default-color, 25%);
                        }
                    }
                    .@{prefix}-tool {
                        color: @text-color-normal;
                        border-color: fade(@default-color, 15%);
                        &:hover {
                            background-color: fade(@default-color, 15%);
                        }
                        & > * {
                            color: @text-color-normal;
                            & > * {
                                color: @text-color-normal;
                            }
                        }
                        & > svg {
                            & > * {
                                fill: @text-color-normal;
                            }
                        }
                    }
                }
                .@{prefix}-body {
                    &:empty::before {
                        color: @text-color-weak;
                    }
                }
            }
        }
    }
    @{prefix}-blog-list.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-list {
                .@{prefix}-item {
                    color: @text-color-normal;
                    &.@{prefix}-placeholder {
                        color: @text-color-weak;
                    }
                    .@{prefix}-title {
                        .text-color-states(@theme-color);
                    }
                    .@{prefix}-information {
                        color: @text-color-weak;
                        & > * {
                            &::before {
                                color: @text-color-weak;
                            }
                            & > a {
                                color: @text-color-normal;
                                &::before {
                                    color: @text-color-weak;
                                }
                            }
                        }
                    }
                    .@{prefix}-summary {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-blog-post.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-post {
                .@{prefix}-title {
                    color: @theme-color;
                }
                .@{prefix}-information {
                    color: @text-color-weak;
                    & > * {
                        &::before {
                            color: @text-color-weak;
                        }
                        & > a {
                            color: @text-color-normal;
                            &::before {
                                color: @text-color-weak;
                            }
                        }
                    }
                    .@{prefix}-action {
                        & > * {
                            .text-color-states(@text-color-strong);
                            &::before {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
                .@{prefix}-replies {
                    background-color: @shade-color;
                    .@{prefix}-item {
                        .@{prefix}-credit {
                            span {
                                color: @text-color-normal;
                            }
                        }
                        p {
                            color: @text-color-normal;
                            &.@{prefix}-editable {
                                color: @text-color-normal;
                                border: 1px dashed fade(@default-color, 15%);
                                background-color: @contrast-color;
                            }
                        }
                    }
                }
            }
            .@{prefix}-reply {
                border-top: 2px solid @theme-color;
                background-color: @contrast-color;
                .@{prefix}-synopsis {
                    & > b {
                        color: @text-color-normal;
                    }
                    & > a {
                        &.@{prefix}-icon {
                            svg {
                                path {
                                    fill: @theme-color;
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    @{prefix}-comments.@{prefix}-root {
        .@{prefix}-content {
            .@{prefix}-synopsis {
                color: @text-color-normal;
            }
            .@{prefix}-item {
                .@{prefix}-credit {
                    span {
                        color: @text-color-normal;
                    }
                }
                p {
                    &.@{prefix}-editable {
                        border-color: fade(@default-color, 15%);
                        background-color: @contrast-color;
                    }
                }
            }
        }
    }
    @{prefix}-feedback.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-item {
                .@{prefix}-memo {
                    border: 1px solid fade(@default-color, 3%);
                    background-color: @contrast-color;
                    .box-shadow(e("0 0 15px 0 fade(black, 5%), 0 2px 1px 0px fade(black, 7.5%)"));
                    &::before {
                        color: @contrast-color;
                        text-shadow: -1px 0px 2px fade(black, 15%);
                    }
                    a {
                        .text-color-states(@text-color-normal);
                    }
                    p {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-forum-composer.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-forum-list.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-bar {
                .@{prefix}-search {
                    border-right: 2px solid @contrast-color;
                    input, input[type] {
                        background-color: transparent;
                    }
                }
            }
            .@{prefix}-list {
                .@{prefix}-item {
                    color: @text-color-normal;
                    &.@{prefix}-placeholder {
                        color: @text-color-weak;
                    }
                    .@{prefix}-title {
                        color: @text-color-strong;
                    }
                    time {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-forum-thread.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-thread {
                .@{prefix}-title {
                    h1 {
                        color: @text-color-strong;
                    }
                }
                .@{prefix}-replies {
                    background-color: @shade-color;
                    .@{prefix}-item {
                        .@{prefix}-credit {
                            span {
                                color: @text-color-normal;
                            }
                        }
                        p {
                            color: @text-color-normal;
                            &.@{prefix}-editable {
                                color: @text-color-normal;
                                border-color: fade(@default-color, 15%);
                                background-color: @contrast-color;
                            }
                        }
                    }
                }
            }
            .@{prefix}-reply {
                background-color: @contrast-color;
                .@{prefix}-synopsis {
                    & > b {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-forum.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-group-card.@{prefix}-root {
        .@{prefix}-information {
            p {
                color: @text-color-normal;
            }
        }
    }
    @{prefix}-group-header.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-information {
            background-color: @contrast-color;
            p {
                color: @text-color-normal;
            }
        }
        ul {
            border-top: 2px solid fade(@default-color, 10%);
            li {
                &:hover {
                    a {
                        color: @text-color-normal;
                    }
                }
                &.@{prefix}-active {
                    a {
                        color: @text-color-normal;
                    }
                }
                a {
                    span {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-group-settings.@{prefix}-root {
        .@{prefix}-content {
            h2 {
                color: @default-color;
            }
        }
    }
    @{prefix}-messages-composer.@{prefix}-root {
        .@{prefix}-content {
            .@{prefix}-recipient {
                color: @text-color-strong;
                &::before {
                    color: @text-color-normal;
                }
            }
            input, input[type] {
                color: @text-color-strong;
            }
            form {
                background-color: @contrast-color;
                .clearfix;
            }
        }
    }
    @{prefix}-messages.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-sidebar {
                .@{prefix}-suggestions {
                    a {
                        b {
                            color: @text-color-normal;
                        }
                    }
                }
                .@{prefix}-list {
                    .@{prefix}-item {
                        border-bottom: 1px solid fade(@default-color, 2.5%);
                        &.@{prefix}-unread {
                            div {
                                color: @text-color-weak;
                            }
                        }
                        &.@{prefix}-active {
                            background-color: @contrast-color !important;
                        }
                        div {
                            color: @text-color-normal;
                            b {
                                color: @text-color-strong;
                            }
                        }
                    }
                }
            }
            .@{prefix}-main {
                background-color: @contrast-color;
                .@{prefix}-conversation {
                    .@{prefix}-item {
                        &.@{prefix}-inbound {
                            p {
                                color: @text-color-normal;
                                background-color: @shade-color;
                            }
                        }
                        time {
                            color: @text-color-weak;
                        }
                    }
                }
            }
        }
    }
    @{prefix}-overlay.@{prefix}-root {
        color: @text-color-normal;
    }
    @{prefix}-profile-activity.@{prefix}-root {
        .@{prefix}-content {
            ul {
                li {
                    border-left: 2px dotted fade(@text-color-normal, 35%);
                    div {
                        color: @text-color-normal;
                        b {
                            color: @text-color-normal;
                        }
                        time {
                            color: @text-color-weak;
                        }
                    }
                }
            }
        }
    }
    @{prefix}-profile-card.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-information {
            img {
                border-color: fade(@default-color, 15%);
            }
            p {
                color: @text-color-normal;
            }
        }
    }
    @{prefix}-profile-header.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-information {
            background-color: @contrast-color;
            img {
                border: 4px solid fade(@default-color, 15%);
            }
            p {
                color: @text-color-normal;
            }
        }
        ul {
            border-top: 2px solid fade(@default-color, 10%);
            li {
                &:hover {
                    a {
                        color: @text-color-normal;
                    }
                }
                &.@{prefix}-active {
                    a {
                        color: @text-color-normal;
                    }
                }
                a {
                    color: @text-color-normal;
                    span {
                        color: @text-color-normal;
                    }
                }
            }
        }
    }
    @{prefix}-profile-settings.@{prefix}-root {
        .@{prefix}-content {
            h2 {
                color: @default-color;
            }
        }
    }
    @{prefix}-star-button.@{prefix}-root {
        color: @text-color-normal;
        &:hover {
            background-color: @contrast-color;
        }
        .@{prefix}-content {
            a {
                .@{prefix}-text {
                    color: @text-color-normal;
                }
            }
        }
    }
    @{prefix}-star-list.@{prefix}-root {
        color: @text-color-normal;
        .@{prefix}-content {
            .@{prefix}-list {
                .@{prefix}-item {
                    color: @text-color-normal;
                    &.@{prefix}-placeholder {
                        color: @text-color-weak;
                    }
                    .@{prefix}-title {
                        color: @text-color-strong;
                    }
                }
            }
            .@{prefix}-controls {
                color: @text-color-strong;
                background-color: fade(@default-color, 10%);
                a {
                    svg {
                        path {
                            fill: @text-color-strong;
                        }
                    }
                }
            }
        }
    }
    @{prefix}-private-content.@{prefix}-root {
        .@{prefix}-content {
            &.@{prefix}-blocked {
                border-color: @text-color-weak;
            }
        }
    }
    
    // Responsive

    /* Window Width < 480 */
    @media only screen and (max-width: 479px) {
        @{prefix}-group-header.@{prefix}-root {
            .@{prefix}-information {
                .@{prefix}-members {
                    img, span {
                        border: 2px solid @contrast-color;
                    }
                }
            }
            ul {
                li {
                    &.@{prefix}-active {
                        background-color: @contrast-color;
                    }
                    a {
                        color: @text-color-normal;
                        &.@{prefix}-count, &.@{prefix}-label {
                            &::after {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
            }
        }
        @{prefix}-profile-header.@{prefix}-root {
            ul {
                li {
                    &.@{prefix}-active {
                        background-color: @contrast-color;
                    }
                    a {
                        &.@{prefix}-count{
                            &::after {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
            }
        }
    }

    /* 480 ≤ Window Width < 768 */
    @media only screen and (min-width: 480px) and (max-width: 767px) {
        @{prefix}-group-header.@{prefix}-root {
            .@{prefix}-information {
                .@{prefix}-members {
                    img, span {
                        border: 2px solid @contrast-color;
                    }
                }
            }
            ul {
                li {
                    &.@{prefix}-active {
                        background-color: @contrast-color;
                    }
                    a {
                        &.@{prefix}-count, &.@{prefix}-label {
                            &::after {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
            }
        }
        @{prefix}-profile-header.@{prefix}-root {
            ul {
                li {
                    &.@{prefix}-active {
                        background-color: @contrast-color;
                    }
                    a {
                        &.@{prefix}-count {
                            &::after {
                                color: @text-color-weak;
                            }
                        }
                    }
                }
            }
        }
    }
}

// Light
.@{prefix}-theme-light {
    .colorStructure(rgb(63, 95, 127), tint(rgb(63, 95, 127), 95%), white, rgb(63, 95, 127));
}

// Dark
.@{prefix}-theme-dark {
    .colorStructure(rgb(63, 63, 63), shade(rgb(63, 63, 63), 5%), rgb(71, 71, 71), rgb(191, 191, 191));
}